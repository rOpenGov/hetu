<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Random Personal Identity Codes — rpin • hetu</title><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Random Personal Identity Codes — rpin"><meta name="description" content="A function that generates random Finnish personal identity codes
   (hetu codes)."><meta property="og:description" content="A function that generates random Finnish personal identity codes
   (hetu codes)."><meta property="og:image" content="https://ropengov.github.io/hetu/logo.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenGov"><meta name="twitter:site" content="@rOpenGov"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet"><!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.min.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hetu</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/hetu.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/hetu/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Random Personal Identity Codes</h1>
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/hetu/blob/main/R/rpin.R" class="external-link"><code>R/rpin.R</code></a></small>
      <div class="d-none name"><code>rpin.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function that generates random Finnish personal identity codes
   (<code>hetu</code> codes).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rpin</span><span class="op">(</span></span>
<span>  <span class="va">n</span>,</span>
<span>  start.date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1895-01-01"</span><span class="op">)</span>,</span>
<span>  end.date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  p.male <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  p.temp <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  num.cores <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rhetu</span><span class="op">(</span></span>
<span>  <span class="va">n</span>,</span>
<span>  start.date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1895-01-01"</span><span class="op">)</span>,</span>
<span>  end.date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  p.male <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  p.temp <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  num.cores <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>number of generated <code>hetu</code>-pins</p></dd>


<dt id="arg-start-date">start.date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>Lower limit of generated <code>hetu</code> dates,
character string in ISO 8601 standard, for example "2001-02-03".
Default is "1895-01-01".</p></dd>


<dt id="arg-end-date">end.date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>Upper limit of generated <code>hetu</code>.
Default is current date.</p></dd>


<dt id="arg-p-male">p.male<a class="anchor" aria-label="anchor" href="#arg-p-male"></a></dt>
<dd><p>Probability of males, between 0.0 and 1.0. Default is 0.4.</p></dd>


<dt id="arg-p-temp">p.temp<a class="anchor" aria-label="anchor" href="#arg-p-temp"></a></dt>
<dd><p>Probability of temporary identification numbers, between
0.0 and 1.0. Default is 0.0.</p></dd>


<dt id="arg-num-cores">num.cores<a class="anchor" aria-label="anchor" href="#arg-num-cores"></a></dt>
<dd><p>The number of cores for parallel processing. The number
of available cores can be determined with <code>detectCores()</code>.
Default is 1.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a vector of generated <code>hetu</code>-pins.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function will return an error "too few positive probabilities" in
<code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></code> function if you try to generate too many codes
in a short enough timeframe. The theoretical upper limit of valid PINs is
in the millions, but the number of valid PINs per day used to be 898 PINs
at maximum, meaning 327770 for each year. Attempting to generate e.g.
a 1000 pins for a timespan of one day would result in an error.</p>
<p>In practice this theoretical upper limit number was
much lower since the old practice was that the same personal number
component cannot be "recycled" if it has been used in the past.
To illustrate, if an identity code "010101-0101" has already been assigned
to someone born in 1901-01-01, a similar code "010101A0101" for someone
born in 2001-01-01 could not be used.</p>
<p>In hetu package version 1.1.0 we have taken into account a new government
decree that increased the amount of valid century markers and therefore
increased the amount of valid personal codes per day. Additionally, the
decree has made it possible to recycle individual codes, as the century
marker is now thought to be a distinguishing character of the personal
identity code.</p>
<p>However, the current implementation still keeps the old 898 codes per day
limit intact, and assigns new century markers with a low probability: old
markers "-" and "A" are given a 95 <!-- % probability of appearing and the new -->
markers are given a 1 <!-- % probability each. --></p>
<p>In the future this may be altered
into a waterfall pattern so that the initial 898 codes for each date
get "-" as the century marker, the next 898 get "Y", and so on.
This would mean that each day would have 5388 valid codes and the
distribution of century markers would be more
realistic in the sense that additional century markers are taken into use
only after the previous range has been exhausted. However, this would
require generating rather large datasets even for basic testing purposes.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pyry Kantanen, Jussi Paananen</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">rpin</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="hetu.html">hetu</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          hetu    sex p.num ctrl.char       date day month year century</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 020433-2215   Male   221         5 1933-04-02   2     4 1933       -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 170147-462T Female   462         T 1947-01-17  17     1 1947       -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 101002A0333   Male   033         3 2002-10-10  10    10 2002       A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   valid.pin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      TRUE</span>
<span class="r-in"><span><span class="fu"><a href="hetu.html">hetu</a></span><span class="op">(</span><span class="va">x</span>, extract <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Male"   "Female" "Male"  </span>
<span class="r-in"><span><span class="fu"><a href="hetu.html">hetu</a></span><span class="op">(</span><span class="va">x</span>, extract <span class="op">=</span> <span class="st">"ctrl.char"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "5" "T" "3"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">rhetu</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "130334-674A" "200438-883D" "230379-412X"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pyry Kantanen, Mans Magnusson, Jussi Paananen, Leo Lahti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>



    <!-- Add ropengov logo -->
  <script src="../BS5/logo.js"></script></body></html>

